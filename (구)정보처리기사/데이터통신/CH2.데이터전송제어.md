# S1. 데이터링크제어
## 1. 데이터링크제어의 이해
## 1.1 데이터링크제어
- 데이터 통신망에 접속된 컴퓨터나 단말장치가 오류없이 투명한 정보를 효율적이고 원활하게 송수신하기 위하여 데이터통신시스템이 갖춰야할 제어기술
- 데이터입출력, 동기제어, 오류제어 등을 포함

## 1.2 데이터전송제어절차
- 송수신을 위한 일정한 순서를 전송제어절차라고 함
- 이때 사용하는 일정한 구조를 전송프레임이라고 함
### 전송제어절차
1. **회선접속** : 물리적접속단계
2. **데이터링크 확립** : 논리적인 경로 구성(셀렉션, 폴링방법)
3. **데이터전송**
4. **데이터링크의 해제통보** : 논리적 경로 해제
5. **회선절단** : 물리적접속 해제

## 2. 데이터전송프레임
- 송신측에서 발생된 정보의 정확한 전송을 위해, 사용자 정보에 헤더와 트레일러를 부과하는 과정을 캡슐화라고 하며,
- 이러한 형식화된 데이터블록을 프레임이라고 함

      수신측에서는 모든 정보가 1과 0으로 수신되며, 어디서부터 제어영역이고 정보영역인지 미리 약속하지 않을 경우, 
      정상적으로 수신된 비트열일지라도 엉뚱한 의미를 갖는 정보로 해석되기 쉬움
      따라서, 7비트(비트지향프레임) 혹은 8비트(바이트지향프레임) 또는 각각 비트에 의미를 부여(비트지향프레임)하여 송수신하도록 함.

## 2.1 동기전송프레임의 종류
- 문자지향형 / 비트지향형 / 바이트지향형

## 3. 문자지향프레임 (BASIC(BSC)프레임구조)
- 문자위주 프레임
- 전송방향은 반이중방식으로만 사용 (한쪽은 대기해야하는 방식, 무전기)
- 회선연결은 스타형(Point-to-Point) 방식뿐만 아니라, 버스형(멀티포인트)에서도 사용될 수 있음
- 같은 전송회선만 가능(종속적) (ex.꼬임선케이블이면 모두 꼬임선케이블, 동축케이블이면 모두 동축케이블로만 통신)
- 오류제어방식은 Stop-and-Wait ARQ (정지대기방식) 사용
- 오류검출이 어렵고, 전송효율이 나쁨
- 주로 동기전송방식을 사용하나, 비동기전송방식을 사용하기도 함
<img width="400" src="https://user-images.githubusercontent.com/29009929/155965845-ff04f9a1-aa5a-4394-a560-589daa41ece5.png">
<img width="400" src="https://user-images.githubusercontent.com/29009929/155965921-53fa74db-35ef-478d-93ea-34bdf227e24d.png">

## 4. 비트지향프레임(HDLC프레임구조)
### HDLC 특징
- 비트위주 프레임
- 단방향, 반이중, 전이중 방식 모두 사용 가능
- 다른 전송회선도 가능(독립적)
- 오류제어방식은 연속적ARQ(Go-Back-N, Selective-repeat)를 사용
- 전송효율과 신뢰성이 높음
- 동기식 전송

<img width="400" src="https://user-images.githubusercontent.com/29009929/155966286-adc12dc2-e66c-46f6-b730-8ac008a88124.png">

## 4.1 플래그(FLAG)
- 프레임의 앞과 뒤를 구분하는 비트열로, '01111110'으로 구성됨
- 동기를 유지함
- 비트투과성으로 기본적인 오류를 검출함

### 비트투과성(비트스터핑)

      통신회선을 공유하는 모든 다른 프레임들과 구분되는 비트열로,
      송신측에서는 송신하기전에 송신메시지 앞과 뒤에 '01111110'을 추가하여 전송함
      또한, FLAG비트를 제외한 모든 비트는 연속된 1의 비트가 6개 이상 되지 않도록, 0을 강제적으로 추가하여 송신함
      
      수신측은 FLAG비트를 제외한 비트열에 1의 문자가 연속적으로 5개가 입력되면, 5개 다음에 입력된 0비트를 제거함
      
      이처럼, 0을 삽입하고 0을 제거하여 기본적인 오류를 검출하고, 신뢰성있는 송수신이 되도록 하는 기능을
      비트투과성 또는 비트스터핑이라고 함


## 4.2 주소부(ADRESS)
- 상대국이나 복합국의 주소를 지정할 때 사용하는 블록
- 기본적으로 8비트를 사용하며, 8바이트까지 확장 가능
- 1바이트의 경우에는 총 256개의 주소 사용 가능
- 이중에서 누구나 사용할 수 있는 방송용주소(11111111)와 시험용(00000000)을 제외하면 실제주소는 254개 부여 가능

## 4.3 제어부(CONTROL)
- 전송될 메시지는 일정 길이의 작은 데이터조각(프레임, 패킷)으로 나누어 목적지에 전송되며,
- 여러 전송로나 교환기를 거쳐 전송되기 때문에 다양한 문제에 직면함
- 따라서, 이러한 문제를 해걀할 수 있는 비트열(제어비트)과 데이터조각의 순서를 부여하여 데이터 조각들을 재결합하거나,
- 오류데이터조각을 재전송할 수 있도록 하는 블록으로 8비트 또는 16비트까지 확장이 가능함
- 제어부에는 I-프레임, U-프레임, S-프레임이 존재함

### I-프레임(Information Frame, 정보전송프레임)
- 프레임을 제어하거나 감시하지 않고, 순수한 정보만을 전송하는 프레임
- 첫번째 비트가 0일 때 정보전송프레임으로 인식함
- 사용자데이터를 전달하거나, 피기백킹기법을 통해 데이터에 대한 확인응답을 보낼 때 사용함

      [피기백킹]
      
      수신측에서 송신측에 데이터요청을 했을 경우, 
      송신측은 바로 응답하지 않고 수신측에 데이터를 보낼 환경이 만들어지면
      데이터를 보내면서, 이전에 요청한 응답까지 같이 보내는 방식

### S-프레임(Supervisor Frame, 감시감독프레임)
- 정보전송프레임(I-프레임)을 감시 및 감독하는 프레임
- 흐름제어 및 에러제어를 담당하는 프레임
- 맨 앞 두 비트가 10이면 감시프레임으로 인식
- STA에는 RR(00,수신완료), REJ(01,수신거부), RNR(10,수신준비안됨)등의 제어 명령이 존재함

### U-프레임(Unnumbered Frame, 비번호제프레임)
- 두 컴퓨터간에 통신하기 위한 초기설정 및 링크확립과 해제 등의 명령이 있는 프레임
- 정보전송프레임(I-프레임)을 전송하기 전에 준비과정 혹은 전송을 종료하는 과정을 지원함
- 맨 앞 두 비트가 11이면 비번호제 프레임으로 인식

## 4.4 정보부
- 사용자 사이에서 교환되는 정보메시지블록으로 길이, 구성과 관계없이 송수신 간 협의에 따름

## 4.5 프레임검사순서부(FCS : Frame Check Sequence)
- 주소부 / 제어부 / 정보부 블록의 오류를 검사하는 블록
- 오류검사방법은 보통 CRC방식을 사용

---
# S2. 데이터오류제어
## 1. 오류의 발생원인
### 감쇠현상(Attenuation Distortion)
    - 전기적 신호 중에 전송매체의 저항을 이겨내기 위해, 약간의 에너지가 손실되는데 이를 감쇠현상이라고 함
### 지연왜곡(Delay Distortion)
    - 전송매체를 통한 신호전달이 주파수에 따라 그 속도를 달리함으로써 유발되는 신호손상현상
    - 주파수의 중심주파수와 양쪽 끝 주파수 강도의 차이 때문에 생기는 오류
    - 주로 하드와이어 전송매체에서 발생

### 열 잡음(Thermal Noise), 백색잡음(White Noise)
    - 전송매체 내에서 온도변화에 따른 전자 운동량이 변함으로써 발생하는 잡음
    - 모든 전자(전기)적인 전송매체에서 발생함
    - 열잡음은 위성통신에서는 나타나지 않음

### 상호변조잡음(Inter Modulation Noise)
    - 서로 다른 주파수들이 똑같은 전송매체를 공유할 때, 
      이 주파수들이 서로의 합과 차의 신호를 발생함으로써 발생되는 채널의 간섭현상
    - 상호변조잡음을 피하기 위해서는 보호대역을 두고 주파수를 구분해야함

### 누화잡음(Cross Talk Noise)
    - 인접한 전송매체의 전기적인 신호의 결합으로 생기는 잡음
    - 보통 전화를 할 때 나타나는 혼선이 누화잡음임

## 2. 오류제어방식
## 2.1 순방향 오류 수정(FEC : Forward Error Correction, 전진오류수정)
- 송신측이 한개고 수신측이 여러개일 경우에 사용하는 방식
- 모든 수신측의 재전송 요구를 받아들이기 적합하지 않은 환경에서 주로 사용하는 방식
- **송신측은 전송프레임에 잉여비트를 추가하여 수신측에서 직접 오류검사 및 수정이 가능하게 함으로써,**
- **같은 프레임을 재전송하는 일이 없도록 하는 방식**
- 대표 알고리즘 : 해밍코드, 상승코드 

## 2.2 역방향 오류 수정(BEC : Backward Error Correction, 후진오류수정)
- 순방향오류수정 방식보다 더 많이 사용되는 방식
- **송신측에서 전송되어온 프레임들 중 오류가 있는 프레임을 판단하여, 오류가 발생되면 송신측에 통보하여 다시 재전송받는 기법**
- 대표 알고리즘 : CRC, 패리티비트, 블록합
- 역방향 오류수정의 매커니즘을 총괄해서 자동반복요청ARQ라고 함

## 2.3 자동반복요청(ARQ : Automatic Repeat reQuest, 오류검출 후 재전송
### 정지대기ARQ (Stop-and Wait ARQ)
- 한번에 한개의 프레임 전송
- 한개의 프레임을 전송한 후, 수신측의 ACK나 NAK를 기다림
- ACK이면 다음 프레임 전송
- NAK이거나 일정시간동안 신호가 없으면, 같은 프레임을 재전송
- 재전송이 있을 수 있으므로 송신측에 버퍼가 한개 필요함
- 오버헤드로 인한 부담이 큼
- BASIC전송절차(문자지향프레임)에서 사용하는 오류제어 방식

### Go-Back-N 
- 여러개의 프레임 전송
- 수신측의 NAK신호가 도착하지 않으면 게속 전송함
- 수신측에서 응답이 없으면 긍정적 응답으로 간주
- 오류가 발생하면, 오류가 발생한 프레임부터 재전송
- 중복 전송에 문제가 발생가능
- 오류가 적은 전송일 때 효율적
- HDLC/SDLC 전송절차에서 사용되는 오류제어방식

## 선택적재전송ARQ (Selective-repeat)
- 여러개의 프레임 전송
- 수신측의 NAK신호가 도착하지 않으면 계속 전송함
- 수신측에서 응답이 없으면, 긍정적응답으로 간주
- 오류가 발생하면, 오류가 발생한 프레임만 재전송
- Go-Back-N방식의 중복전송문제를 보완한 방식
- 일부분을 재결합하면 재전송을 해야하므로 많은 버퍼가 필요하고, 기술적으로 복잡하여 Go-Back-N에 비해 사용되는 경우 적음
- HDLC전송절차에서 사용되는 오류제어방식

## Dynamically ARQ
- 동적으로 프레임 전송
- 수신측에서는 오류발생확률을 송신측에 전송
- 송신측에서는 적절한 개수를 수신측에 동적으로 전송
- 전송효율을 높일 수 있음
- 제어기술이 너무 복잡하고, 비용문제 때문에 거의 사용하지 않음

## 3. 오류검출방식의 종류
- 패리티방식, VRC, LRC, CRC, 검사합, 해밍코드, 상승코드 방식 등
## 3.1 패리티방식
- 수직중복검사(VRC, 세로중복검사(LRC), 순환중복검사(CRC), 검사합(Checksum)으로 구분되며, 
- 검사합을 제외한 나머지는 데이터링크층에서 사용하기 위해 물리계층에서 구현됨
- CRC방식은 다항식을 사용하는 방식으로, 동기식전송에서 주로 사용하는 방식

      [패리티방식특징]
      - 전송오류의 검출을 위해 사용
      - 잉여비트를 사용
      - 1의 개수를 셈
      - 전송비트내의 1의 개수가 짝수 또는 홀수개가 되도록 결정
      - 수직중복검사방식은 짝수개가 되도록 함
      - 전송효율은 매우 좋음
      - 짝수개의 비트가 오류가 발생할 경우, 검출률이 낮아지는 단점이 있음

### 수직중복검사(VRC : Vertical Redundancy Check, 1차원패리티)
    - 오류검출방식에서 가장 비용이 적게 들며, 가장 널리 사용되는 기법으로 보통 패리티검사라고 함
    - 패리티비트라는 비트를 각 정보비트에 추가하여, 패리티비트를 포함한 정보비트 내의 1으 ㅣ개수가 짝수가 되도록 함
    - 패리티비트의 위치는 고정되지 않고 앞, 뒤, 중간 어디든 사용 가능

### 세로중복검사(LRC : Longitudinal Redundancy Check, 2차원패리티)
    - 전송블록을 한 개씩 검사하는 수직중복방식(VRC)에 비해 세로중복검사(LRC)는 프레임을 몇 개의 그룹으로 묶어서 오류를 검사하는 방식

### 순환중복검사(CRC : Cyclic Redundancy Check)
    - 다항식을 이용하여 오류를 검출하는 방식
    - 정보 비트열 전부를 한번에 검사하지 않고, 부분적으로 중첩되게 검사하므로 집단오류검출방식 또는 군집오류검출방식이라고 함
    - 매우 복잡하지만 오류를 수정할 수 있는 방식은 아님
    - 오류가 발견되면, 송신측에 재전송을 부분적으로 요청하게 됨
    - 오류검출률이 매우 뛰어나서 가장 일반적으로 많이 사용하며, 특히 HDLC프레임의 FCS(프레임검출블록)에 사용하는 방식
    - 1개, 2개, 홀수 개의 오류는 100% 검출되며, 동기식 전송에 적합한 방삭

## 3.2 검사합(Checksum)
- 최종결과가 모두 0이면 정상 수신되었음을 알 수 있음
- 하지만, 모두 0이 아닌 경우에는 오류를 감지하게 되고, 송신측에 재전송을 요청하게 됨


## 3.3 해밍코드방식
- 수신측에서 직접 오류가 발생한 비트를 찾아 수정하는 전진오류수정(FEC) 방식
- 오류의 검출 및 수정까지 하므로, 자기정정부호라고 함
- 1비트의 오류만 수정 가능하며, 정보비트외에 잉여비트(오류를 찾거나 제어하기 위해 전송비트열에 추가하는 비트)가 많이 필요

## 3.4 상승코드(부호)방식
- 해밍코드방식의 개선된 방식으로, 해밍코드는 1비트의 오류만 수정할 수 있는 반면,
- 상승코드는 여러개의 비트 오류가 있더라도 한계값(경계값), 순차적디코딩을 이용하여 모두 수정할 수 있는 방식
- 한계값디코딩 : 적은 수의 오류를 포함하고 있는 짧은 정보(데이터) 비트열에 적당
- 순차적디코딩 : 많은 수의 오류를 포함하고 있는 많은 정보(데이터) 비트열에 적당, 오류를 수정하는 능력이 뛰어나지만 매우 복잡함












