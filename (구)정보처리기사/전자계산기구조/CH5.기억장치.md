# S1. 기억장치의 개요
## 1. 기억장치의 분류
<img width="350" src="https://user-images.githubusercontent.com/29009929/153008751-38cdcc2b-1125-4068-9b91-2b844fea3613.png">

## 2. 기억장치 관련 용어
## 2.1 접근시간(Access Time)
- 정보를 기억장치에 기억시키거나 읽어내는 명령이 있고 난 후부터, 실제로 기억 또는 읽기가 시작되는데 소요되는 시간
## 2.2 사이클시간
- 읽기/쓰기 신호를 보내고나서 다음 읽기/쓰기 신호를 보낼 때까지의 시간
- DRAM메모리는 재충전 시간이 필요하므로 사이클시간이 접근시간보다 크다
## 2.3 밴드폭(Bandwidth)
- 기억장치에서 자료를 읽거나 기억시킬 때, 기억장치가 1초동안에 전달하거나 받아들일 수 있는 비트 수
- 주기억장치와 중앙처리장치 사이의 정보전달능력의 한계를 의미

## 3. 계층메모리 (레캐주보)
- **레지스터 - 캐시기억장치 - 주기억장치(RAM) - 보조기억장치(디스크,테이프,드럼)**
- 가격/속도 : 레>캐>주>보
- 용량 : 레<캐<주<보

## 3.1 계층메모리 구성목적
1) 레지스터 : 연산을 위한 데이터나 연산결과 또는 제어데이터를 임시기억시키는데 사용
2) 캐시 : CPU와 주기억장치의 속도차이를 극복하기 위해 사용
3) 주기억장치 : CPU가 직접사영할 수 있는 기억장소로, 수행중인 프로그램 및 프로그램이 사용할 데이터를 저장하는데 사용
4) 보조기억장치 : 나중에 사용할 데이터나 파일을 보관하는 비휘발성 메모리로, 용량이 크고 액세스 속도가 느린 기억장소

---
# S2. 주기억장치
## 1. 주기억장치(Main Storage)의 기본
CPU가 직접 사용할 수 있는 기억장소로, 시스템프로그램영역과 사용자프로그램영역으로 나누어 사용되는, 비교적 바르고 큰 메모리를 의미
## 1.1 주기억장치 특징
- 기억장소에 상관없이 접근시간이 일정
- 기억소자에 대한 선택기능이 명확
- 주기억장치의 성능은 기억용량이 크고 사이클타임이 빠르며, 밴드폭이 클수록 좋음
## 1.2 주기억장치의 용도
- 수행중인 프로그램 저장
- 수행중인 프로그램이 사용할 데이터를 저장
- 수행중인 프로그램이 사용할 임시기억장소로 사용
- 보조기억장치를 위한 버퍼로 사용

## 2.반도체메모리
## 1. RAM(랜덤액세스메모리)
- 휘발성 메모리
- DRAM / SRAM
## 1.1 DRAM(dynamic)
- 재충전이 필요한 메모리
- 소비전력이 낮고, 집적도가 높음
- 속도가 떨어지지만, 가격이 저렴
## 1.2 SRAM(static)
- 전원이 공급되는 동안에는 재충전이 필요없는 메모리
- 소비전력이 크고, 집적도가 낮음
- 플립플롭 형태로 구성되어 속도가 빠르지만, 가격이 비쌈
- 주로 캐시메모리에 사용
## 2. ROM(Read only)
- 비휘발성 메모리
- 읽기만 가능
- 기억장치 내용의 임의 변경 불가능

      1. Mask ROM : 내용 변경 불가능
      2. PROM : 한 번에 한해서 변경 가능
      3. EPROM : 자외선 이용. 여러번 변경 가능
      4. EEPROM : 전기적. 여러번 변경 가능

## 3. 자기코어메모리(마그네틱코어메모리)
- 전류일치기술에 의하여 기억장소를 선별하는 기억장치
- 비휘발성 메모리
- 파괴성판독 메모리이므로, 자신의 값을 보존하기 위해서는 재저장이 필요
- 사이클타임이 기억장치의 액세스타임보다 항상 크거나 같은 관계식을 갖는 메모리
- 자기드럼이나 자기디스크에 비해 호출속도 매우 빠름
- *파괴성판독(DRO) : 데이터를 읽어내면서 원래의 데이터를 소거하는 판독 방법

---
# S3. 보조기억장치
## 1. 보조기억장치
- 데이터나 파일을 보관하는 비휘발성 메모리
- 용량이 크고, 액세스속도가 느림
- 가격이 저렴
- 많은 자료를 영구적 보관 가능
- 자기디스크, 자기테이프, 자기드럼, DVD, CD-ROM, 플로피디스켓 등
## 2. 자기디스크(마그네틱디스크)
- 직접저장장치로서, **순차처리와 랜덤처리를 병행**할 수 있는 기록매체
- 액세스 시간이 빠름
- 레코드의 추가, 삭제, 정정이 쉬움
## 2.1 자기디스크의 접근시간

    1. 탐색시간(Seek Time) : 헤드가 데이터를 읽기 위해서 해당 트랙까지 도달하는데 걸리는 시간
    2. 회전대기시간(Rotational Delay Time) : 디스크 장치가 회전하여 해당 섹터가 헤드에 도달하는데 걸리는 시간
    3. 전송시간(Transfer Time) : 데이터가 전달되는데 걸리는 시간
    4. 접근시간(Access Time) : 읽기신호나 쓰기신호를 접하고나서, 데이터가 읽히거나 쓰여지는데 걸리는 시간.
    5. 접근시간 = 탐색시간+회전대기시간+전송시간

## 3. 자기테이프
- **순차처리**만 가능한 SASD(Sequential Access Storage Device)
- 가격이 저렴, 보관이 쉬움
- 대용량 기억장치, 밀도가 높음
- 일괄처리시 경제적이기 때문에, 백업용으로 많이 쓰임
- 블록단위로 데이터 전송

## 4. 디스크의 RAID 기술

    RAID-0 (스트라이핑) : 데이터를 세그먼트로 분할해서 저장

    RAID-1 (미러링) : 두개의 물리적인 디스크에 각각 중복 저장
    
    RAID-2 (해밍코드) : 해밍코드 방식을 이용하여, 디스크의 데이터 에러검증에 사용하는 방식

    RAID-3 (스트라이핑/패리티별도) : 스트라이핑 방식으로 저장, 쓰기속도 느림, 패리티정보 별도보관
    
    RAID-4 (블록/패리티별도) : 파일을 블록으로 나누어 저장, 패리티정보 별도보관
    
    RAID-5 (패리티블록나누기) : 패리티정보를 모든 블록의 스토리지에 나누어 저장
    
    RAID-6 (이중구조) : 블록당 패리티를 이중구조로 구축하여 데이터 보호성을 높임
    
    RAID-7 (RAID컨트롤러내장) : RAID컨트롤러에 OS, 버스, 캐시가 내장
    
    RAID-10 (RAID-1을묶음) : RAID-1로 구성된 드라이브를 스트라이프 어레이로 묶어 안정성과 속도 향상

---
# S4. 캐시 및 연관기억장치
## 1. 캐시기억장치
- 중앙처리장치(CPU)와 주기억장치의 속도차이를 극복하기위해, CPU와 주기억장치 사이에 설치한 메모리.
- CPU와 비슷한 액세스 속도, 미리 데이터를 옮겨 놓고 버퍼개념으로 사용하는 기억장치
## 1.1 캐시기억장치 특징
- CPU와 주기억장치의 사이에 사용 (둘의 속도차이를 줄이기 위함), 일종의 버퍼 기능 수행
- 가격이 비쌈
- 기억장치의 접근시간을 줄이므로, 컴퓨터 처리 속도 향상
- CPU에서 실행중인 프로그램과 데이터 기억
- 캐시접근시 충돌을 방지하기 위해, 코드와 데이터를 분리해서 기억시키는 분리캐시(split cache) 사용
## 1.2 캐시적중률(히트율,hit ratio)
- (적중횟수/전체접근횟수) * 100
## 1.3 평균메모리액세스시간
- 히트시간+미스도+미스패널티

      ex) 캐시적중률 95%, 히트시간 1클록사이클, 미스패널티 15클록사이클의 경우 :
          미스율 : 100%-95% = 5%. 미스도 : 0.05 
          1+0.05+15 = 1.75

## 2. 주기억장치의 블록을 캐시에 사상하는 방법
## 2.1 직접사상(Direct Mapping)
- 기억시킬 캐시블록번호 = 주기억장치블록번호 %(나머지) 캐시전체블록 수
## 2.2 전체연합사상(Fully Associative Mapping)
- 주기억장치 임의의 블록 하나를 캐시 전체 블록 중, 아무곳이나 하나를 정해서 기억시키는 방법
- 메모리워드의 번지와 데이터를 함께 저장하는 방식으로, 
- 캐시블록이 꽉 채워진 경우라면, 보통 라운드로빈(RR)방식으로 메모리워드번지와 데이터를 교체하는 방식
## 2.3 세트연합사상(Set Associative Mapping)
- 직접사상과 전체연합사상 방식의 장점을 취한 방식
- 캐시블록을 몇개의 블록으로 이루어진 세트(set)단위로 분리한 후, 
  
  세트를 선택할 때는 직접사상방식을 따르고, 세트 내에서 해당 블록을 지정할 때는 전체연합사상 방식을 따름

## 3. 캐시메모리에 데이터 저장 시, 주기억장치와의 관계

    1) Write Through : 캐시에 저장이 일어날 때, 캐시와 주기억장치를 **동시갱신**
    2) Write Back : 캐시의 내용에만 갱신이 일어나다가 해당 캐시에서 제거될 때, **주기억장치에 해당 블록을 복사해서 갱신**

## 4. 참조의 국한성

    1) 시간구역성(Temporal Locality) : 최근 참조된 기억장소는 가까운 장래에도 계속 참조될 가능성이 높음
                                      (서브루틴, 스풀, 스택, 누산기, 집계)
    2) 공간구역성(Spatial Locality) : 일단 하나의 기억장소가 참조되면, 근처의 기억장소가 참조될 가능성이 높음
                                      (배열, 순차명령어실행)

## 5. 연관기억장치(Associative Memory)
기억장소에 접근 시 주소에 의해 해당 위치에 접근하는 것이 아니라, **찾고자하는 내용 일부를 가지고 원하는 내용을 찾아 그 위치의 내용 모두를 제공하는 기억장치**
## 5.1 연관기억장치 특징
- 기억된 정보의 내용에 따라 호출하는 기억장치로, 정보검색에 유용
- 주소 필요 없음
- 병렬판독회로를 내장하고 있기 때문에, 가격이 비쌈
- 작은용량의 IC메모리(반도체집적회로이용)를 사용하며, 캐시메모리나 가상메모리의 주소탐색에 많이 이용됨
- 캐시메모리보다 빠름
## 5.2 연관기억장치 구성요소

    1) 검색데이터 레지스터 : 찾고자하는 내용의 일부분 기억 (전체)
    2) 마스크 레지스터 : 검색데이터 레지스터에 있는 데이터에서, 검색에 필요없는 부분을 마스크 비트로 세트(set)시키는 역할 수행 (필요없는 부분 숨김)
    3) 일치 레지스터 : 검색하려는 내용과 일치하는 단어를 포함하고 있는 내용이 있는 경우, 그것을 표시하는데 사용하는 레지스터 (표시)

---
# S5. 가상기억장치 및 인터리빙
## 1. 가상기억장치 (virtual memory)
- 기억용량을 효과적으로 이용하기 위하여 주기억장치보다 훨씬 큰 보조기억공간을, 주기억장치의 연속된 기억공간으로 사용하는 방식
- **보조기억장치를 주기억장치처럼 사용**
## 1.1 가상기억장치 특징
- 주소공간확대 목적
- 보조공간 전체를 주소공간으로 보고, 명령어를 만드는 방식
- 소프트웨어로 실현됨
- 보조기억장치는 직접접근방식(DASD)이어야함 (직접접근방식은 자기디스크)
- 가상주소를 실제주소로 변환하는 과정이 필요
## 1.2 가상기억장치 용어

    1) 사상(mapping) : 가상기억장치(보조기억장치)에 있는 내용을 어떤 일정 단위로 분류하여, 
                       이 단위의 내용이 실기억장치(주기억장치)의 어느 위치에 있는지 알아내는 방법

    2) 페이징(paging/같은크기) : 가상기억장치(보조기억장치)에 있는 내용을 어떤 일정 단위로 분류할 때,
                                이 분류단위가 똑같은 크기일 때를 페이징이라고 함

    3) 세그먼트(segment/다른크기) : 가상기억장치(보조기억장치)에 있는 내용을 어떤 일정 단위로 분류할 때,
                                   이 분류단위가 똑같지 않은 경우를 세그먼트라고 함

    4) 페이지폴트(pagefault) : 실기억장치(주기억장치)에 없는 페이지가 참조될 때 생기는 인터럽트. 
                              페이지폴트 발생 시, CPU는 하던 일을 중단하고, 해당 페이지를 주기억장치로 옮겨 놓은 후 다시 인터럽트 처리를 하게됨

    5) 스태깅(staging) : 가상기억체제에서 페이지폴트 발생 시, 희생페이지를 결정해서 보조기억장치의 이전 위치에 기억시키고, 
                         새로운 페이지를 이전 희생된 페이지가 있던 곳에 위치시키는 과정

    6) 스래싱(Thrashing) : 보조기억장치의 페이지 접근횟수가 많아 작업수행시간보다 페이징교체시간이 더 많아지는 경우

## 2. 기억공간의 관리
## 2.1 연속로딩기법
- 프로그램을 연속된 기억장소에 저장하여 수행하는 기법
- 처음부터 구역을 구분해두는 고정분할과, 
- 필요에 따라 구역을 정하는 동적분할이 있음
## 2.2 분산로딩기법
- 프로그램을 적당한 크기로 나누어 필요한 부분만 주기억장치에 저장하여 수행하는 기법
- 주소공간과 실제공간을 분리해서 사용
- 보조기억장치의 페이지접근횟수가 많아 작업수행시간보다 페이지교체시간이 더 많은 스래싱 발생

## 3. 페이징기법과 세그먼트기법
## 3.1 페이징 (균등/내부O)
- 프로그램을 비연속적인 기억공간에 적재하여 수행할 수 있도록, 실기억공간과 가상기억공간을** 균등분할**하고,
- 매핑테이블을 이용해 가상주소를 실주소로 변환하는 방법
- **외부단편화 X, 내부단편화 O** 
- 이미 적절하게 똑같은 크기로 분할되었기 떄문에, 못들어가는 경우는 없어서 외부단편화는 X
- 이미 정해져 있는 크기 이므로, 들어가고도 남는 공간은 발생가능하므로 내부단편화는 O
## 3.2 세그먼트 (가변/외부O)
- 프로그램을 주프로그램/부프로그램/배열/스택 등 용도가 다른 **여러크기(가변크기)**의 세그먼트로 나누어 수행시키는 방법
- **외부단편화 O, 내부단편화 X**
- 필요한 만큼 공간을 쓰면 되므로 남는 공간이 생기는 내부단편화는 X
- 가변적으로 쓰다보니, 쓰고 남은 공간이 부족해 더 이상 들어갈 수 없을 수 있으므로 외부단편화 O

      1. 내부 단편화 (Internal Fragmentation)
      - 메모리공간이 적재하는 프로그램보다 커서, 적재하고도 공간이 남아 있으나
      - 그 공간은 또 너무 작아서 다른 프로그램들이 쓰지 못하고 그냥 남아있게되는 빈공간이 생기는 현상
      - 일단 들어갔지만 다른 프로그램이 쓰지 못하는 빈공간이 남은 것
      
      2. 외부 단편화 (External Fragmentation)
      - 남아있는 총 메모리공간이 필요한 프로그램 크기보다 크지만,
      - 합쳐진 총 공간이 클 뿐, 연속되지 않은 각자의 공간은 프로그램 크기보다 작아서 적재시킬 수 없는 현상
      - ex) 메모리에 남아 있는 공간은 100MB(50MB+50MB)인데 C라는 작업이 70MB일때 일어나는 현상. 70은 50에 들어갈 수 없음
      - 들어가지 못하고 남는거 

## 4. 메모리인터리빙
메모리 접근시간을 최소화하기 위해 메모리를 복수개의 모듈로 나누고, 각 모듈에 연속적인 주소를 부여하여 동시에 접근이 가능하게 하는 기법
## 4.1 메모리인터리빙 특징
- 캐시기억장치, 고속DMA 전송 에서 많이 사용 (DMA : 직접메모리접근)
- CPU가 시분할하여 여러 모듈을 번갈아가며 접근
- 기억장치를 구성하는 모듈의 수만큼 동시접근 가능
- 기억장치 접근시간을 효율적으로 높일 수 있음
- CPU의 쉬는 시간을 줄일 수 있음
- 단위시간당 수행할 수 있는 명령어의 수를 증가시킬 수 있음
- 기억장치버스를 시분할하여 사용
- [메모리인터리빙 참고블로그](http://blog.skby.net/%EB%A9%94%EB%AA%A8%EB%A6%AC-%EC%9D%B8%ED%84%B0%EB%A6%AC%EB%B9%99-memory-interleaving/)


