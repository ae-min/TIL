# S1. 명령어 수행 및 마이크로동작
## 1 명령어(instruction)의 수행
## 1.1 명령어의 수행순서
- **명령어인출(Fetch) - 명령어해독(Decoder) - 오퍼랜드인출(Operand Fetch) - 실행(Execution) - 인터럽트조사**

## 2. 마이크로오퍼레이션
## 2.1 마이크로오퍼레이션의 개념
- CPU에서 발생시키는 하나의 클록펄스동안 실행되는 기본동작
- 레지스터와 플래그의 상태변환을 일으키게 하는 동작을 의미
- CPU에서 발생시키는 제어신호에 따라 마이크로오퍼레이션이 순서적으로 발생
- 멸령어의 수행은 마이크로오퍼레이션의 수행으로 이루어짐

## 3. 마이크로사이클타임
- 마이크로사이클 : 하나의 오퍼레이션을 수행하는 과정
- 마이크로사이클타임 : 마이크로사이클을 실행하는 시간
## 3.1 동기고정식 (Synchronous Fixed)
- 여러개의 마이크로오퍼레이션 동작 중에서 마이크로사이클타임이 가장 긴 것을 선택하여 CPU의 클록주기로 사용
- 가장 긴 것을 사용하므로, CPU 이용시간이 비효율적
- 모든 마이크로오퍼레이션의 수행시간이 유사한 경우 사용
- 제어장치 구현이 간단
## 3.2 동기가변식 (Synchronous Variable)
- 마이크로사이클타임에 따라 몇개의 군으로 분류하여, 군별로 CPU의 클록주기를 따로따로 부여하는 방식
- 마이크로오퍼레이션의 수행시간이 현저히 차이날 때 사용
## 3.3 비동기식 (Asynchronous)
- 모든 마이크로오퍼레이션에 대해 서로 다른 마이크로사이클타임 부여
- 하나의 오퍼레이션 동작이 끝나면, 끝난 사실을 제어장치에 알려 다른 오퍼레이션이 수행되도록 해야하므로 제어장치가 복잡함
- 시간지연 발생, CPU처리속도 늦어짐

---
# S2. 메이저상태
CPU가 무엇을 하고 있는가를 나타내는 상태
## 1. 메이저사이클의 종류
주기억장치에 무엇을 위해 접근하는지에 따라, 인출/간접/실행/인터럽트 4가지 상태로 구성. F와 R 플래그상태를 가지고 파악함
<img width="200" src="https://user-images.githubusercontent.com/29009929/153003564-8ad0101a-79a4-4859-9459-12baee946451.png">
## 1.1 인출주기 (Fetch Cycle)
- 명령어를 기억장치에서 주기억장치로 읽어오는 주기
- 명령어를 해독하는 주기
- 명령어의 종류가 판단되는 주기
- PC(프로그램카운터)가 하나 증가되어 다음 명령어를 지시하는 주기
## 1.2 간접주기 (Indirect Cycle)
- 유효주소를 얻기 위하여 기억장치에 한번 더 접근하는 주기
- 오퍼랜드에 표현된 주소가 간접주소인 경우 실행되는 주기
## 1.3 실행주기 (Execute Cycle)
- 기억장치로부터 실제데이터를 읽어다가 연산동작을 수행시키는 주기
- 다양한 형태의 명령어가 분기처리되는 주기
- ADD / AND / LOAD(LDA) / STORE(STA) / BUN(JUMP) 등
## 1.4 인터럽트주기 (Interrupt Cycle)
- 여러 원인에 의해 정상적인 수행과정을 계속할 수 없는 경우, 먼저 응급조치를 취한 후 계속 수행할 수 있도록 CPU의 현 상태를 보관하기 위해 기억장치에 접근하는 주기
- 명령어 수행 과정 중 인터럽트가 발생하더라도, 반드시 해당 명령어가 완료된 상태에서 인터럽트를 처리하게 됨. 따라서, 인터럽트 처리가 완료된 상태에서는 반드시 인출주기로 이동함

## 2. 메이저사이클의 관계
<img width="400" src="https://user-images.githubusercontent.com/29009929/153003976-3f76f83a-dcbc-4060-9c28-577251b00ea2.png">

- 인출이 완료되면 해독결과에 따라 직접주소이면 실행사이클로, 간접주소이면 간접사이클을 거쳐 실행사이클로 진행
- 실행사이클에서 인터럽트가 발생하면 인터럽트사이클로, 발생하지않으면 인출사이클로 이동
- 인터럽트사이클에서는 항상 인출사이클로 진행

---
# S3. 제어
## 1. 마이크로프로그램
- 어떤 명령을 수행할 수 있는 일련의 제어워드가 특수한 기억장치(ROM)속에 저장되어 기계어 명렁어들이 적절히 수행되도록 각종 제어신호를 발생시키는 프로그램
- CPU내의 제어장치를 설계하는 프로그램
- 마이크로명령어로 형성
- 제어메모리는 보통 빠른 사이클타임이 요구되므로, ROM을 사용하는 것이 일반적
- 하드웨어와 소프트웨어의 중간적인 것으로 펌웨어라고도 함

## 2. 제어장치의 구현방법
## 2.1 고정배선식(Hard Wired) 제어방식
- 제어장치가 순서회로로 만들어진 것으로
- 미리 정해놓은 제어신호들이 순서대로 발생되도록 하드웨어적으로 구현한 방식
- 마이크로프로그램 제어방식보다 속도가 빠름
- 한 번 만들어진 것은 동작 방법이 바뀌었을 때 변경 불가능함
- 제작이 어렵고, 집적화가 어려워 비용이 많이듬
## 2.1 마이크로프로그램 제어방식
- 마이크로명령어로 구성하여 작성하므로, 쉽게 설계 변경 가능
- 마이크로명렁어를 인출하는 별도의 시간 때문에 속도가 느림
- 마이크로프로그램을 저장하기 위한 제어메모리가 필요
- 마이크로프로그램에 대한 유지보수 및 오류수정 용이
- 명령어 세트가 복잡하고 큰 컴퓨터에서 비용이 절감됨

## 3. 마이크로명령어 형식
1) 수평마이크로명령어(Horizontal)
- 마이크로액션수행에 관계되는 제어점을 직접 나타내기 때문에 직접마이크로명령어라고도 함
- 마이크로명령어의 각 비트는 중앙처리장치의 독립제어점과 1:1연결되어 있으므로 디코더가 필요없으나
- 비트 수가 많이 필요하므로 하나의 명령어 길이가 길다
- 디코딩이 필요없으므로 수행속도가 빠르고, 병렬수행도 가능

2) 수직마이크로명령어(Vertical)
- 제어점을 직접 나타내는 것이 아니라, 제어점 정보를 몇개의 그룹으로 분류하여 부호화해서 나타내기 때문에 부호화마이크로명령어라고 함
- 명령어 길이가 짧은 대신, 수행속도가 수평마이크로명령어에 비해 

## 4. 제어메모리의 번지결정방법
순차수행, 무조건분기, 조건분기(상태비트에따른), 서브루틴 call과 return, 매크로




