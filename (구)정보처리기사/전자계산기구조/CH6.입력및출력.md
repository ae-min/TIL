# S1. 입출력의 기본
- [입출력시스템관련참고PPT자료](https://slidesplayer.org/slide/16567604/)
## <입출력 제어방식>
## 1. CPU제어기에 의한 입출력 방식
- CPU와 입출력장치 사이에 인터페이스가 있는 시스템에 적용
- CPU가 입출력 제어기 역할을 담당
- 인터페이스에 있는 데이터레지스터와 CPU에 있는 레지스터 사이에서 데이터 이동이 일어남
## 1.1 폴링방식 (Polling, 프로그램에 의한 입출력제어방식)
- CPU와 입출력장치 사이에서 데이터 전달이 프로그램에 의해서 제어되는 방식
- 프로그램에서 D와 B 플래그 상태를 검사하여 데이터를 전송
- CPU가 계속적으로 플래그를 검사해야하므로, 비효율적이며 CPU는 다른 연산을 처리하지 못하는 방식

## 1.2 인터럽트방식 (인터럽트에 의한 입출력제어방식)
- CPU가 계속적으로 플래그를 검사하지 않고,
- 입출력이 필요할 때 입출력장치에서 CPU에게 인터럽트를 요청하면, 그때 CPU가 하던 일을 멈추고 입출력장치에 데이터를 전송하게 하는 방식
- 폴링방식보다 CPU 이용 효율이 높음

## 2. DMA제어기에 의한 입출력방식 (DMA : 직접메모리액세스)
- **CPU 개입없이 입출력장치와 메모리가 직접 데이터를 주고받는 것**
- CPU 개입없이 **직접 주기억장치과 DMA사이에서 일련의 입출력 동작이 이루어지는 방식**
- DMA제어기는 작업이 끝나면 CPU에게 인터럽트 신호를 보내 작업 종료를 알림
- CPU는 작업에 직접 참여하지 않고 다음 명령을 계속처리하므로, 시스템의 전반적인 속도가 향상됨
- 프로그램이 실행되는 동안 인터럽트의 수를 최소화 시켜줌
- 디스크동작과 같은 고속 입출력장치 사용

## 3. 채널제어기에 의한 입출력방식
- **주변장치에 대한 제어권한을 CPU로부터 넘겨받아 CPU대신 입출력을 관리하는 것**
- **CPU 개입없이 입출력 전용 프로세서인 채널이 직접 주기억장치에 접근**하여, 
- 채널 프로그램의 채널명령어를 인출(fetch)하여 채널명령어 요구조건에 따라 입출력 명령을 수행하는 방식
- **주기억장치와 입출력장치 중간에 위치**
- CPU와 입출력장치의 속도차로 인한 단점을 해결
- CPU제어장치로부터 입출력 전송을 위한 명령어를 받으면, CPU와는 독립적으로 동작하여 입출력 완료
- 주기억장치에 기억되어있는 채널 프로그램의 수행과 자료의 전송을 위하여 주기억장치에 직접접근
<img width="500" src="https://user-images.githubusercontent.com/29009929/153145620-9ac8e691-83a1-4ee2-a327-6aed200a9a17.png">

## <데이터전송 제어방식>
## 1. 스트로브제어(Strobe) - 수신여부를 알수 없음
- 스트로브신호를 주는 제어선 한개와 데이터버스선 한개로 연결되어있는 데이터전송방식
- 스트로브신호로 데이터가 전송될 시간을 알려줌
- 송신->수신 또는 수신->송신으로 보내는 단방향전송
- 전송한 데이터를 수신측에서 확실하게 수신했는지 알 수 없음
<img width="220" src="https://user-images.githubusercontent.com/29009929/153148194-3ae157eb-3d35-40b1-b1a9-a09a5e5037aa.png">

## 2. 핸드셰이킹 (병렬입출력데이터전송방식)- 수신여부 알수 있음
- 송신 및 수신 양쪽에서 상대편에게 제어신호를 보내는 방법
- 데이터버스 외에 양쪽에서 제어신호를 보내는 별도의 회선 2개가 필요
- 제어라인 중 하나의 제어라인은 : 송신->수신 방향으로, 버스에 데이터가 실려있음을 수신측에 알려줌
- 다른 하나의 제어라인은 : 수신->송신 방향으로, 수신장치가 데이터를 받아들일 수 있는지 여부를 송신측에 알려주는 역할을 함
- 데이터활성신호=스트로브신호
<img width="220" src="https://user-images.githubusercontent.com/29009929/153148743-2923cf41-d935-4f1b-8796-c13eeeb9916f.png">

## <동기식 및 비동기식전송>
## 1. 동기 데이터 전송방식
- 송신측에서 수신측에 정보를 전달할 때, 송신측의 클록펄스를 함께 보내는 방식
- 송수신 장치가 가까이 있는 경우 주로 사용
## 2. 비동기 데이터 전송방식
- 송신측과 수신측의 시간적 특성이 현저히 다른 경우 사용
- 전송을 제어하기 위해, 시작과 끝을 나타내는 제어비트(start bit, stop bit)를 첨가해서 사용

---
# S2. DMA 및 채널
## 1. DMA (Direct Memory Access 직접접근메모리)
- CPU의 개입없이 직접 주기억장치와 DMA사이에서 일련의 입출력 동작이 이루어지는 방식
## 1.1 DMA 특징
- CPU를 경유하지 않음
- 직접 기억장치와 입출력장치 사이에서 전송이 이루어짐
- 하나의 입출력 명령어에 의해 하나의 블록 전체가 전송됨
- 사이클스틸에 의해 전송이 이루어짐 (사이클스틸(Cycle Steal) : CPU의 사이클(인출-간접-실행-인터럽트)을 훔치는 동작)
- 전송이 끝나면 인터럽트를 발생시켜 CPU에게 알림
- 데이터전송절차 : 버스사용요구->버스사용허가->데이터전송->인터럽트
## 1.2 사이클스틸 
- CPU가 프로그램을 수행하기위해 계속해서 메이저사이클을 반복하고 있는 상태에서,
- DMA제어기가 하나의 워드전송을 위해서 **일시적으로 CPU의 사이클을 훔쳐서 사용**하는 경우
## 1.3 사이클스틸과 인터럽트의 차이점
### 사이클스틸

    - CPU 상태보존 필요하지 않음 
    - 잠시 CPU가 쉬게됨
    - 아무 사이클이나 훔치는 것이 가능
### 인터럽트

    - CPU 상태보존 필수
    - CPU는 쉬지 않으며, 인터럽트를 처리해야함
    - 아무거나 훔치는게 불가능하며, 항상 실행사이클 이후에만 인터럽트가 인지됨

## 2. 채널
- 주기억장치와 입출력장치 사이에서 입출력을 제어하는 입출력 전용 프로세서
- 채널명령어를 분석하여 직접 주기억장치에 접근해 입출력을 수행
- CPU와 동시에 동작이 가능하므로 고속으로 입출력이 가능
- 여러개의 블록전송가능
- 전송시에는 DMA도 이용 가능

## 2.1 채널의 종류
    1) 셀렉터채널 : 채널하나를 하나의 입출력장치가 독점해서 사용. 고속전송에 적합
    2) 바이트멀티플렉서채널 : 한개의 채널에 여러개의 입출력장치를 연결하여 시분할 공유하는 방식. 저속 입출력방식
    3) 블록멀티플렉서채널 : 셀렉터채널과 멀티플렉서채널 방식을 결합한 방식. 융통성있는 운용 가능




